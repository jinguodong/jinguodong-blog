<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="guodong.j" />
    <title>Facebook Pop ä½¿ç”¨æŒ‡å— | guodong.j</title>
    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAD/APr59wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiIiIiIiAAAiIiIiIiIAACIiIiIiIgERERERERIiAREREREREiIBERERERESIgERIiIiERIiAREiIiIREiIBESIhERESIgERIiERERIiAREiIiIiIiIBESIiIiIiIgERIiIiIiIiAREREREREAABEREREREQAAERERERERAADgAQAA4AEAAOABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAA8AAAAPAAAADwAA" rel="icon" type="image/x-icon" />
    <link href="/feed/" rel="alternate" title="guodong.j" type="application/atom+xml" />
    
    <link rel="stylesheet" href="/jinguodong-blog/media/css/highlight.css">
    <link href='/jinguodong-blog/media/webfonts/ss-social.css' rel='stylesheet'>
    <link href='/jinguodong-blog/media/webfonts/ss-standard.css' rel='stylesheet'>
    <link href="/jinguodong-blog/media/css/screen.css" rel="stylesheet">

    <script type="text/javascript" src="/jinguodong-blog/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <div class="buttons">
          <a href="/jinguodong-blog/" class="ss-icon" title="Go to homepage">home</a>
          <a href="/jinguodong-blog/categories" class="ss-icon" title="Category" >list</a>
          <a href="/jinguodong-blog/tags" class="ss-icon" title="Tag Cloud" >tags</a>
          <a href="/jinguodong-blog/guestbook" class="ss-icon" title="Guest Book" >talk</a>
          <a href="/jinguodong-blog/about" class="ss-icon" title="About" >user</a>
          <a href="/jinguodong-blog/feed" class="ss-icon" title="Subscribe by RSS" >rss</a>
        </div>
        <h1>Facebook Pop ä½¿ç”¨æŒ‡å—</h1>
        </header>
        <hr>
        <article class="content">
        <section class="post">
<p>å½“å¬é—»Facebookè¦å¼€æºè‡ªå·±çš„Animationæ¡†æ¶çš„æ—¶å€™ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯åŸºäºCore Animationè¿›è¡Œçš„å°è£…ï¼ŒåŒ…å«äº†ä¸€äº›åŠ¨ç”»æ•ˆæœåº“ã€‚ç­‰æºç çœŸæ­£å‡ºæ¥åï¼Œæ‰å‘ç°å®Œå…¨æƒ³é”™äº†ï¼ŒFacebook Popå…¶å®æ˜¯åŸºäºCADisplayLink(Macå¹³å°ä¸Šä½¿ç”¨çš„CVDisplayLink)å®ç°çš„ç‹¬ç«‹äºCore Animationä¹‹å¤–çš„åŠ¨ç”»æ–¹æ¡ˆã€‚è¿™é‡Œå°±ä¸ç»†è¯´å…¶å®ç°åŸç†äº†ï¼Œä¸»è¦è®²è®²Facebook Popå¦‚ä½•ä½¿ç”¨ã€‚</p>

<h2>ä¸€.åŸºæœ¬æ¦‚å¿µ</h2>

<p>åœ¨è®¡ç®—æœºçš„ä¸–ç•Œé‡Œé¢ï¼Œå…¶å®å¹¶ä¸å­˜åœ¨ç»å¯¹è¿ç»­çš„åŠ¨ç”»ï¼Œä½ æ‰€çœ‹åˆ°çš„å±å¹•ä¸Šçš„åŠ¨ç”»æœ¬è´¨ä¸Šéƒ½æ˜¯ç¦»æ•£çš„ï¼Œåªæ˜¯åœ¨ä¸€ç§’çš„æ—¶é—´é‡Œé¢ç¦»æ•£çš„å¸§å¤šåˆ°ä¸€å®šçš„æ•°é‡äººçœ¼å°±è§‰å¾—æ˜¯è¿ç»­çš„äº†ï¼Œåœ¨iOSä¸­ï¼Œæœ€å¤§çš„å¸§ç‡æ˜¯60å¸§æ¯ç§’ã€‚
iOSæä¾›äº†Core Animationæ¡†æ¶ï¼Œåªéœ€è¦å¼€å‘è€…æä¾›å…³é”®å¸§ä¿¡æ¯ï¼Œæ¯”å¦‚æä¾›æŸä¸ªanimatableå±æ€§ç»ˆç‚¹çš„å…³é”®å¸§ä¿¡æ¯ï¼Œç„¶åä¸­é—´çš„å€¼åˆ™é€šè¿‡ä¸€å®šçš„ç®—æ³•è¿›è¡Œæ’å€¼è®¡ç®—ï¼Œä»è€Œå®ç°è¡¥é—´åŠ¨ç”»ã€‚ Core Aniamtionä¸­è¿›è¡Œæ’å€¼è®¡ç®—æ‰€ä¾èµ–çš„æ—¶é—´æ›²çº¿ç”±CAMediaTimingFunctionæä¾›ã€‚
Pop Animationåœ¨ä½¿ç”¨ä¸Šå’ŒCore Animationå¾ˆç›¸ä¼¼ï¼Œéƒ½æ¶‰åŠAnimationå¯¹è±¡ä»¥åŠAnimationçš„è½½ä½“çš„æ¦‚å¿µï¼Œä¸åŒçš„æ˜¯Core Animationçš„è½½ä½“åªèƒ½æ˜¯CALayerï¼Œè€ŒPop Animationå¯ä»¥æ˜¯ä»»æ„åŸºäºNSObjectçš„å¯¹è±¡ã€‚å½“ç„¶å¤§å¤šæ•°æƒ…å†µAnimationéƒ½æ˜¯ç•Œé¢ä¸Šæ˜¾ç¤ºçš„å¯è§†çš„æ•ˆæœï¼Œæ‰€ä»¥åŠ¨ç”»æ‰§è¡Œçš„è½½ä½“ä¸€èˆ¬éƒ½ç›´æ¥æˆ–è€…é—´æ¥æ˜¯UIViewæˆ–è€…CALayerã€‚ä½†æ˜¯å¦‚æœä½ åªæ˜¯æƒ³ç ”ç©¶Pop Animationçš„å˜åŒ–æ›²çº¿ï¼Œä½ ä¹Ÿå®Œå…¨å¯ä»¥å°†å…¶åº”ç”¨äºä¸€ä¸ªæ™®é€šçš„æ•°æ®å¯¹è±¡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå¯¹è±¡:</p>

<pre><code>&lt;a href='https://github.com/interface' class='user-mention'&gt;@interface&lt;/a&gt; AnimatableModel : NSObject
&lt;a href='https://github.com/property' class='user-mention'&gt;@property&lt;/a&gt; (nonatomic,assign) CGFloat animatableValue;
&lt;a href='https://github.com/end' class='user-mention'&gt;@end&lt;/a&gt;

#import "AnimatableModel.h"
&lt;a href='https://github.com/implementation' class='user-mention'&gt;@implementation&lt;/a&gt; AnimatableModel
- (void)setAnimatableValue:(CGFloat)animatableValue{
  _animatableValue = animatableValue;
  NSLog(@"%f",animatableValue);
}

&lt;a href='https://github.com/end' class='user-mention'&gt;@end&lt;/a&gt;
</code></pre>

<p>æ­¤å¯¹è±¡åªæœ‰ä¸€ä¸ªCGFloatç±»å‹çš„å±æ€§ï¼Œéå¸¸ç®€å•ï¼Œè¿™é‡Œåœ¨AnimatableModelå¯¹è±¡ä¸Šè¿è¡Œå‡ ç§Pop Animationè¿›è¡Œæµ‹è¯•ï¼Œä»¥ä¾¿ç»Ÿè®¡animatableValueçš„å˜åŒ–æ›²çº¿ã€‚</p>

<p>ç”±äºæ­¤å¯¹è±¡çš„å±æ€§ä¸åœ¨Pop Propertyçš„æ ‡å‡†å±æ€§ä¸­ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ä¸ªPOPAnimatablePropertyï¼Œ</p>

<pre><code>  POPAnimatableProperty *animatableProperty = [POPAnimatableProperty propertyWithName:@"com.geeklu.animatableValue" initializer:^(POPMutableAnimatableProperty *prop) {
    prop.writeBlock = ^(id obj, const CGFloat values[]) {
        [obj setAnimatableValue:values[0]];
    };
    prop.readBlock = ^(id obj, CGFloat values[]) {
        values[0] = [obj animatableValue];
    };
}];
</code></pre>

<p>ç»Ÿè®¡çš„æ•°æ®æ¥è‡ªä¸Šé¢å±æ€§å˜åŒ–æ—¶çš„Logæ•°æ®ï¼Œåˆ¶å›¾çš„æ—¶å€™å°†æ—¶é—´ä¸­é™¤äº†ç§’ä¹‹å¤–çš„æ—¶é—´éƒ¨åˆ†åˆ é™¤äº†ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ¥è‡ªçœŸå®æµ‹è¯•çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨Numberè¿›è¡Œäº†æ›²çº¿çš„ç»˜åˆ¶ã€‚å›¾ä¸­çš„æ¯ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªç¦»æ•£çš„èŠ‚ç‚¹ï¼Œä¸ºäº†æ–¹ä¾¿è§‚çœ‹ï¼Œä½¿ç”¨ç›´çº¿å°†è¿™äº›ç¦»æ•£çš„ç‚¹è¿æ¥èµ·æ¥äº†ã€‚</p>

<p><img src="http://ww4.sinaimg.cn/mw1024/65cc0af7gw1ego7boez1uj20oc0icju4.jpg" style="width: 50%; height: 50%"/>â€‹</p>

<h3>PopBasicAniamtion With EaseOut TimingFunction</h3>

<pre><code>POPBasicAnimation *animation = [POPBasicAnimation animation];
animation.property = animatableProperty;
animation.fromValue = [NSNumber numberWithFloat:0];
animation.toValue = [NSNumber numberWithFloat:100];
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
animation.duration = 1.5;

_animatableModel = [[AnimatableModel alloc] init];
[_animatableModel pop_addAnimation:animation forKey:@"easeOut"];
</code></pre>

<p><img src="http://ww1.sinaimg.cn/mw1024/65cc0af7gw1egnh3razkxj20sy0kadh2.jpg" style="width: 50%; height: 50%"/>â€‹</p>

<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨ç”»å¼€å§‹çš„æ—¶å€™å˜åŒ–é€Ÿç‡è¾ƒå¿«ï¼Œåˆ°ç»“æŸçš„æ—¶å€™å°±å¾ˆæ…¢äº†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„Ease Outæ•ˆæœã€‚</p>

<h3>PopSpringAniamtion</h3>

<pre><code>POPSpringAnimation *animation = [POPSpringAnimation animation];
animation.property = animatableProperty;
animation.fromValue = [NSNumber numberWithFloat:0];
animation.toValue = [NSNumber numberWithFloat:100];
animation.dynamicsMass = 5;

_animatableModel = [[AnimatableModel alloc] init];
[_animatableModel pop_addAnimation:animation forKey:@"spring"];
</code></pre>

<p><img src="http://ww4.sinaimg.cn/mw1024/65cc0af7gw1egnh8m1lhtj20oi0gg0u4.jpg" style="width: 50%; height: 50%"/>â€‹</p>

<p>ä¸€å¼€å§‹å¿«é€Ÿå‘ç»ˆç‚¹æ–¹å‘é è¿‘ï¼Œç„¶åä¼šåœ¨ç»ˆç‚¹é™„è¿‘æ¥å›æ‘†åŠ¨ï¼Œæ‘†åŠ¨å¹…åº¦é€æ¸å˜å¼±ï¼Œæœ€ååœ¨ç»ˆç‚¹åœæ­¢ã€‚</p>

<p>é€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªå±æ€§å€¼å˜åŒ–çš„æ›²çº¿ä½ å¯ä»¥å¾ˆå¥½çš„ç†è§£åŠ¨ç”»çš„ç±»å‹å’Œå±æ€§çš„å˜åŒ–æ›²çº¿ä¹‹å‰çš„å…³è”äº†ã€‚</p>

<h2>äºŒ.Pop Animationçš„ä½¿ç”¨</h2>

<p>è¿™é‡Œå°±è®²è®²Pop Aniamtionè‡ªå¸¦çš„å‡ ç§åŠ¨ç”»çš„ä½¿ç”¨ã€‚ Pop Animationè‡ªå¸¦çš„åŠ¨ç”»éƒ½æ˜¯åŸºäºPOPPropertyAnimationçš„ï¼ŒPOPPropertyAnimationæœ‰ä¸ªå¾ˆé‡è¦çš„éƒ¨åˆ†å°±æ˜¯ POPAnimatablePropertyï¼Œç”¨æ¥æè¿°animatableçš„å±æ€§ã€‚ä¸Šä¸€èŠ‚ä¸­å°±çœ‹åˆ°äº†å¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªPOPAnimatablePropertyå¯¹è±¡ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œéœ€è¦åœ¨åˆå§‹åŒ–çš„blockä¸­è®¾ç½®writeBlockå’ŒreadBlock</p>

<pre><code>void (^readBlock)(id obj, CGFloat values[])
void (^writeBlock)(id obj, const CGFloat values[])
</code></pre>

<p>è¿™ä¸¤ä¸ªblockéƒ½æ˜¯ç•™ç»™åŠ¨ç”»å¼•æ“æ¥ä½¿ç”¨çš„ï¼Œå‰è€…ç”¨äºå‘ç›®æ ‡å±æ€§å†™å€¼,ä½¿ç”¨è€…éœ€è¦åšçš„å°±æ˜¯ä»valuesä¸­æå–æ•°æ®è®¾ç½®ç»™objï¼›åè€…ç”¨äºè¯»å–ï¼Œä¹Ÿå°±æ˜¯ä»objcä¸­è¯»å–æ”¾åˆ°valuesä¸­ã€‚values[] æœ€å¤šæ”¯æŒ4ä¸ªæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´Pop Aniamtionå±æ€§æ•°å€¼çš„ç»´åº¦æœ€å¤§æ”¯æŒ4ç»´ã€‚
ä¸ºäº†ä½¿ç”¨ä¾¿æ·ï¼ŒPop Animationæ¡†æ¶æä¾›äº†å¾ˆå¤šç°æˆçš„POPAnimatablePropertyé¢„å®šä¹‰ï¼Œä½ åªéœ€è¦ä½¿ç”¨é¢„å®šä¹‰çš„propertyWithNameæ¥åˆå§‹åŒ–POPAnimatablePropertyä¾¿å¯ï¼Œæ¯”å¦‚ä»¥ä¸‹ä¸€äº›é¢„å®šä¹‰çš„propertyWithNameï¼š</p>

<pre><code>kPOPLayerBackgroundColor
...
kPOPViewAlpha
...
</code></pre>

<p>è¿™æ ·é¢„å®šä¹‰çš„POPAnimatablePropertyå·²ç»å¸®ä½ è®¾ç½®å¥½writeBlockå’ŒreadBlockã€‚
ä¸‹é¢çš„ä¸€äº›åŸºäºPOPPropertyAnimationçš„åŠ¨ç”»éƒ½æä¾›äº†å¿«æ·çš„æ–¹æ³•ï¼Œç›´æ¥ä¼ å…¥propertyWithNameä¾¿åˆ›å»ºå¥½äº†ç‰¹å®špropertyçš„åŠ¨ç”»äº†ã€‚
ä¸‹é¢åˆ—ä¸¾çš„å„ä¸ªå®ä¾‹éƒ½å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š<a href="https://github.com/kejinlu/facebook-pop-sample">https://github.com/kejinlu/facebook-pop-sample</a>ã€‚</p>

<h3>1.POPBasicAnimation</h3>

<p>åŸºæœ¬åŠ¨ç”»ï¼Œæ¥å£æ–¹é¢å’ŒCABasicAniamtionå¾ˆç›¸ä¼¼ï¼Œä½¿ç”¨å¯ä»¥æä¾›åˆå§‹å€¼fromValueï¼Œè¿™ä¸ª ç»ˆç‚¹å€¼toValueï¼ŒåŠ¨ç”»æ—¶é•¿durationä»¥åŠå†³å®šåŠ¨ç”»èŠ‚å¥çš„timingFunctionã€‚timingFunctionç›´æ¥ä½¿ç”¨çš„CAMediaTimingFunction,æ˜¯ä½¿ç”¨ä¸€ä¸ªæ¨ªå‘çºµå‘éƒ½ä¸ºä¸€ä¸ªå•ä½çš„æ‹¥æœ‰ä¸¤ä¸ªæ§åˆ¶ç‚¹çš„è´èµ›å°”æ›²çº¿æ¥æè¿°çš„ï¼Œæ¨ªåæ ‡ä¸ºæ—¶é—´ï¼Œçºµåæ ‡ä¸ºåŠ¨ç”»è¿›åº¦ã€‚
<img src="http://ww2.sinaimg.cn/mw1024/65cc0af7gw1egpvtrn8qmj209307qdhf.jpg" style="width: 50%; height: 50%"/>â€‹
è¿™é‡Œä¸¾ä¸€ä¸ªViewç§»åŠ¨çš„ä¾‹å­ï¼š</p>

<pre><code>NSInteger height = CGRectGetHeight(self.view.bounds);
NSInteger width = CGRectGetWidth(self.view.bounds);

CGFloat centerX = arc4random() % width;
CGFloat centerY = arc4random() % height;

POPBasicAnimation *anim = [POPBasicAnimation animationWithPropertyNamed:kPOPViewCenter];
anim.toValue = [NSValue valueWithCGPoint:CGPointMake(centerX, centerY)];
anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
anim.duration = 0.4;
[self.testView pop_addAnimation:anim forKey:@"centerAnimation"];
</code></pre>

<p>è¿™é‡Œself.viewä¸Šæ”¾äº†ä¸€ä¸ªç”¨äºåŠ¨ç”»çš„testViewï¼Œç„¶åå–ä¸€ä¸ªéšæœºåæ ‡ï¼Œè¿›è¡ŒåŠ¨ç”»ã€‚</p>

<h3>2.PopSpringAnimation</h3>

<p>å¼¹ç°§åŠ¨ç”»æ˜¯Bezieræ›²çº¿æ— æ³•è¡¨è¿°çš„ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨PopBasicAniamtionæ¥å®ç°ã€‚PopSpringAnimationä¾¿æ˜¯ä¸“é—¨ç”¨æ¥å®ç°å¼¹ç°§åŠ¨ç”»çš„ã€‚</p>

<pre><code>POPSpringAnimation *anim = [POPSpringAnimation animationWithPropertyNamed:kPOPViewCenter];

NSInteger height = CGRectGetHeight(self.view.bounds);
NSInteger width = CGRectGetWidth(self.view.bounds);

CGFloat centerX = arc4random() % width;
CGFloat centerY = arc4random() % height;

anim.toValue = [NSValue valueWithCGPoint:CGPointMake(centerX, centerY)];
anim.springBounciness = 16;
anim.springSpeed = 6;
[self.testView pop_addAnimation:anim forKey:@"center"];
</code></pre>

<p><img src="http://ww1.sinaimg.cn/mw1024/65cc0af7gw1egqpgva69rg208u0fpjtx.gif" style="width: 25%; height: 25%";/>â€‹</p>

<p>è¿™ä¸ªä¾‹å­çš„åŠ¨ç”»å’Œä¸Šé¢çš„åŸºæœ¬åŠ¨ç”»å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ä¸€ä¸ªviewçš„ç§»åŠ¨ï¼Œä½†æ˜¯è¿™é‡Œæœ‰å¼¹ç°§æ•ˆæœã€‚POPSpringAnimationä¸»è¦å°±æ˜¯éœ€è¦æ³¨æ„ä¸‹å‡ ä¸ªå‚æ•°çš„å«ä¹‰ï¼š</p>

<ul>
<li>springBounciness å¼¹ç°§å¼¹åŠ› å–å€¼èŒƒå›´ä¸º[0, 20]ï¼Œé»˜è®¤å€¼ä¸º4</li>
<li>springSpeed å¼¹ç°§é€Ÿåº¦ï¼Œé€Ÿåº¦è¶Šå¿«ï¼ŒåŠ¨ç”»æ—¶é—´è¶ŠçŸ­ [0, 20]ï¼Œé»˜è®¤ä¸º12ï¼Œå’ŒspringBouncinessä¸€èµ·å†³å®šç€å¼¹ç°§åŠ¨ç”»çš„æ•ˆæœ</li>
<li>dynamicsTension  å¼¹ç°§çš„å¼ åŠ›</li>
<li>dynamicsFriction å¼¹ç°§æ‘©æ“¦</li>
<li>dynamicsMass è´¨é‡  ã€‚å¼ åŠ›ï¼Œæ‘©æ“¦ï¼Œè´¨é‡è¿™ä¸‰è€…å¯ä»¥ä»æ›´ç»†çš„ç²’åº¦ä¸Šæ›¿ä»£springBouncinesså’ŒspringSpeedæ§åˆ¶å¼¹ç°§åŠ¨ç”»çš„æ•ˆæœ</li>
</ul>


<h3>3.PopDecayAnimation</h3>

<p>åŸºäºBezieræ›²çº¿çš„timingFuntionåŒæ ·æ— æ³•è¡¨è¿°Decay Aniamtionï¼Œæ‰€ä»¥Popå°±å•ç‹¬å®ç°äº†ä¸€ä¸ª PopDecayAnimationï¼Œç”¨äºè¡°å‡åŠ¨ç”»ã€‚è¡°å‡åŠ¨ç”»ä¸€ä¸ªå¾ˆå¸¸è§çš„åœ°æ–¹å°±æ˜¯ UIScrollView æ»‘åŠ¨æ¾å¼€åçš„å‡é€Ÿï¼Œè¿™é‡Œå°±åŸºäºUIViewå®ç°ä¸€ä¸ªè‡ªå·±çš„ScrollViewï¼Œç„¶åä½¿ç”¨PopDecayAnimationå®ç°
æ­¤ä»£ç å¯ä»¥è¯¦ç»†å‚è§ <a href="https://github.com/kejinlu/facebook-pop-sample/blob/master/facebook-pop-sample/KKScrollView.m">KKScrollView</a> çš„å®ç°ï¼Œå½“æ»‘åŠ¨æ‰‹åŠ¿ç»“æŸæ—¶ï¼Œæ ¹æ®ç»“æŸçš„åŠ é€Ÿåº¦ï¼Œç»™è¡°å‡åŠ¨ç”»ä¸€ä¸ªåˆå§‹çš„velocityï¼Œç”¨æ¥å†³å®šè¡°å‡çš„æ—¶é•¿ã€‚</p>

<p><img src="http://ww3.sinaimg.cn/mw1024/65cc0af7gw1egmzoapnqwg206i0bm7nn.gif" style="width: 25%; height: 25%";/>â€‹</p>

<h3>4.POPCustomAnimation</h3>

<p>POPCustomAnimation å¹¶ä¸æ˜¯åŸºäºPOPPropertyAnimationçš„ï¼Œå®ƒç›´æ¥ç»§æ‰¿è‡ªPopAnimationç”¨äºåˆ›å»ºè‡ªå®šä¹‰åŠ¨ç”»ç”¨çš„ï¼Œé€šè¿‡POPCustomAnimationBlockç±»å‹çš„blockè¿›è¡Œåˆå§‹åŒ–ï¼Œ</p>

<pre><code>typedef BOOL (^POPCustomAnimationBlock)(id target, POPCustomAnimation *animation);
</code></pre>

<p>æ­¤blockä¼šåœ¨ç•Œé¢çš„æ¯ä¸€å¸§æ›´æ–°çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œåˆ›å»ºè€…éœ€è¦åœ¨blockä¸­æ ¹æ®å½“å‰currentTimeå’ŒelapsedTimeæ¥å†³å®šå¦‚ä½•æ›´æ–°targetçš„ç›¸å…³å±æ€§ï¼Œä»¥å®ç°ç‰¹å®šçš„åŠ¨ç”»ã€‚å½“ä½ éœ€è¦ç»“æŸåŠ¨ç”»çš„æ—¶å€™å°±åœ¨blockä¸­è¿”å›NOï¼Œå¦åˆ™è¿”å›YESã€‚</p>

<h2>å››.Pop Animationç›¸æ¯”äºCore Animationçš„ä¼˜ç‚¹</h2>

<p>Pop Animationåº”ç”¨äºCALayeræ—¶ï¼Œåœ¨åŠ¨ç”»è¿è¡Œçš„ä»»ä½•æ—¶åˆ»ï¼Œlayerå’Œå…¶presentationLayerçš„ç›¸å…³å±æ€§å€¼å§‹ç»ˆä¿æŒä¸€è‡´ï¼Œè€ŒCore Animationåšä¸åˆ°ã€‚ <br/>
Pop Animationå¯ä»¥åº”ç”¨ä»»ä½•NSObjectçš„å¯¹è±¡ï¼Œè€ŒCore Aniamtionå¿…é¡»æ˜¯CALayerã€‚</p>

</section>
<section class="meta">
<span class="author">
  <a href="http://geeklu.com">guodong.j</a>
</span>
<span class="time">
  /
  <time datetime="2014-05-22">2014-05-22</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="/jinguodong-blog/categories/#programming" title="programming">programming</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="/jinguodong-blog/tags/#facebook" title="facebook">facebook</a>&nbsp;
  
  <a href="/jinguodong-blog/tags/#pop" title="pop">pop</a>&nbsp;
  
</span>

</section>
<section class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jinguodong'; // required: replace example with your forum shortname
    var disqus_url = '/jinguodong-blog/2014/05/facebook-pop-usage/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = '/jinguodong-blog/2014/05/custom-container-view-controller/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = '/jinguodong-blog/2014/11/hello-world/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


        </article>
      </div>

    <footer>
        <p><small>Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> | Copyright 2014 - 2015 by <a href="http://jinguodong.github.com/jinguodong-blog/about/">JinGuodong</a> | <span class="label label-info">2015-02-02 20:09:18 ÖĞ¹ú±ê×¼Ê±¼ä</span></small></p>
    </footer>

    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-57094722-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
